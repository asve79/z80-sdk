# Процесс

## Тестирование и отладка
- [ ] Проверить что контрольные значения в реестре устанавливаются верно (дескритор и границы буфера)
- [x] Прием данных одного соединения в один буфер. Данные короткие (меньше буфера)
- [x] Прием данных нескольких соединения в один буфер. Данные короткие (меньше буфера)
- [x] Проверить что будет, если придут данные из незарегистрированного соединения
- [x] Проверка как дописываются данные в один буфер если пришло несколько кусков (несколько команд +ipd)
- [x] Проверить что будет если пршли данные > 2k в одном соединение. Что выдаст ESP модуль, разобьет ли на блоки
- [ ] Проверить реакцию на переполнение буфера, когда идут данные большими кусками. Должен класть в бучер ровно столько сколько в него поместится.

## Сопутствующие ф-ции и TODO
- [x] Обработка ситуации с таймаутом
- [x] Работа с реестром подключений (выделение номера, удаление номера)
- [x] Работа с реестром подключений (загрузка данных по ID в указанный буфер)
- [ ] Реализовать корректную обработку ситуации, когда размер текущего блока данных закончила, а граница попала на часть блока данных команды IPD. Т.е следующий вызов должен "дочитывать" кусок данных.
- [ ] Тестирование мультисоединений (открыть 2 или 3 одновременно, отправить запрос)
- [ ] Решить что делать с реестром если после приема данных соединение отключилось
- [ ] Решить потенциальную проблему нахождения управляющих команд на границах буфера
- [ ] Внедрить регистрацию процедур реагирующих на прием/переполнение буфера и обрыв соединения
- [ ] При инициализации проверять и сбрасывать активные соединения, если таковые имеются
- [ ] При инициализации отключаться от wifi (?) Спорная ф-ция, подумать.

- [ ] Рефактор таймаута

## Мысли на долгосрок
- [ ] После введения менеджера памяти, в буфер класть номер страницы, где лежат данные. При записи просто перекладывать данные через DMA