01   0000             		module keys
02   0000             
03   0000             ;42¦KBSCN
04   0000             ;  ¦опрос клавиш
05   0000             ;  ¦i:A' - обработчик
06   0000             ;  ¦       #00 - учитывает SHIFT, CL, а так же ENG/RUS
07   0000             ;  ¦             (можно вызывать только 1 раз в фрейм)
08   0000             ;  ¦       #01 - всегда выдает код из TAIE1
09   0000             ;  ¦             (можно вызывать несколько раз за фрейм)
10   0000             ;  ¦
11   0000             ;  ¦!KBSCN нужно вызывать до вызова опроса SHIFT и CTRL
12   0000             ;  ¦
13   0000             ;  ¦o: NZ: A - TAIE1/TAIE2/TAIR1/TAIR2 (see PS2P.ASM)
14   0000             ;  ¦    Z: A=#00 - unknown key (also no chars)
15   0000             ;  ¦       A=#FF - buffer end (impossibru!)
16   0000             
17   0000 3E 01       get_key		LD	A,1
18   0002 08          		EXA
19   0003 3E 2A       		LD	A,42
20   0005 C3 06 60    		JP	#6006
21   0008             
22   0008 3E 2F       wait_key	LD	A,47
23   000A C3 06 60    		JP	#6006
24   000D             
25   000D 3E 2E       wait_keyoff	LD	A,46
26   000F C3 06 60    		JP	#6006
27   0012             
28   0012             ;если возвращает NZ, то клавиша нажата.
29   0012 3E 16       is_enter_key	LD	A,22	;22¦ENKE (Enter)
30   0014 C3 06 60    		JP	#6006
31   0017             
32   0017             ;если возвращает NZ, то клавиша нажата.
33   0017 3E 17       is_escape_key	LD	A,23	;23¦ESC
34   0019 C3 06 60    		JP	#6006
35   001C             
36   001C             		endmodule
